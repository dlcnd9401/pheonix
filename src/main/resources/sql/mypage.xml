<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mypage">
	<select id="cart" resultType="hashmap">
		select UserId , 
		       ifnull(path, '') as path, 
		       ifnull(Sname, '') as Sname, 
		       ifnull(Name, '') as Name, 
		       ifnull(Code, '') as Code, 
		       ifnull(Price, '') as Price, 
		       auth 
		  from buylist 
		 where auth=2
	</select>
	
	<select id="del" parameterType="hashmap">
		UPDATE buylist SET auth = 3 where BuyNo = #{BuyNo}
	</select>
	
	<select id="paging" parameterType="hashmap" resultType="hashmap">
		select BuyNo,
		       SortNo,
		       UserId , 
		       ifnull(path, '') as path, 
		       ifnull(Sname, '') as Sname, 
		       ifnull(Name, '') as Name, 
		       ifnull(Code, '') as Code, 
		       ifnull(Price, '') as Price, 
		       auth 
		  from buylist 
		 where auth=2
		 and   UserId = 'test'
		 limit #{start}, #{viewRow}
	</select>
	<select id="totCnt" resultType="hashmap">
		select count(*) as tot from buylist where UserId = 'test' and auth=2
	</select>
</mapper>